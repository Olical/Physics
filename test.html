<!DOCTYPE html>
<html lang='en'>
	<head>
		<title>Physics</title>
		<meta name='author' content='Oliver Caldwell' />
		<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
	</head>
	
	<body>
		<canvas id='world' width='500' height='500'></canvas>
		<script type='text/javascript' src='MooTools.js'></script>
		<script type='text/javascript' src='Physics.js'></script>
		<script type='text/javascript'>
			var canvas = $('world'),
				display = canvas.getContext('2d'),
				world = new Physics.World({
					width: 125,
					height: 125
				});
				
				world.addEvent('step', function(particles) {
					// Every tick clear the screen
					display.fillStyle = '#000000';
					display.fillRect(0, 0, 500, 500);
					display.fillStyle = '#FFFFFF';
					
					// Loop over particles
					particles.each(function(particle) {
						// Draw the particle
						display.fillRect(particle.options.position.x * 4, particle.options.position.y * 4, 4, 4);
					});
				});
				
				// Add a click event to add particles
				canvas.addEvent('click', function(e) {
					world.addParticle(new Physics.Particle({
						position: {
							x: Math.floor(e.event.offsetX / 4),
							y: Math.floor(e.event.offsetY / 4)
						},
						velocity: {
							x: Number.random(-20, 20),
							y: Number.random(-20, 20)
						}
					}));
				});
				
				// Event tests
				world.addEvent('collision', function() {
					console.log('PARTICLE');
				});
				
				world.addEvent('wallCollision', function() {
					console.log('WALL');
				});
		</script>
	</body>
</html>